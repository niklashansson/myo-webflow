"use strict";(()=>{window.dataLayer=window.dataLayer||[];window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{window.addEventListener("load",o)});function o(){let{priceId:e,isFromCheckout:n}=c();if(!e||!n){i();return}let t=m();if(!t)return i();let a=t.planConnections.find(r=>r.active&&r.payment?.priceId===e&&r.payment.status==="PAID"&&!r.payment.cancelAtDate&&r?.payment?.lastBillingDate&&s(r?.payment?.lastBillingDate));if(!a)return i();d(t,a.planId)}function s(e){return Math.floor(Date.now()/1e3)-Number(e)<.5*60}function i(){window.location.href="/"}function c(){let e=new URL(window.location.href),n=e.searchParams.get("fromCheckout");return{priceId:e.searchParams.get("msPriceId"),isFromCheckout:n}}function m(){let e=localStorage.getItem("_ms-mem");return e?JSON.parse(e):void 0}function d(e,n){let t=JSON.stringify({event:"myo-new-subscription",newInstructionsSubscription:{memberEmail:e.auth.email,memberId:e.id,memberFirstName:e.customFields["first-name"],memberLastName:e.customFields["last-name"],memberLocation:e.customFields?.location,stripeCustomerId:e.stripeCustomerId,planId:n}});return window.dataLayer.push(t),t}})();
