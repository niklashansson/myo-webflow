"use strict";(()=>{window.dataLayer=window.dataLayer||[];window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{let e=new URLSearchParams(window.location.href),n=e.get("fromCheckout"),t=e.get("msPriceId");if(!n||!t)return;let s=localStorage.getItem("_ms-mem");if(!s)return;let o=JSON.parse(s);if(!o)return;let{planConnections:i}=o;if(!i.length)return;let a=i.find(r=>c(r,t));a&&m(o,a.planId)});function c(e,n){if(!e.payment)return;let t=e.active,s=e.payment.priceId===n,o=e.payment.status==="PAID",i=!e.payment.cancelAtDate;return t&&s&&o&&i}async function m(e,n){let t={event:"myo-new-subscription",newInstructionsSubscription:{memberEmail:e.auth.email,memberId:e.id,memberFirstName:e.customFields["first-name"],memberLastName:e.customFields["last-name"],memberLocation:e.customFields?.location,stripeCustomerId:e.stripeCustomerId,planId:n}};window.dataLayer.push(t),console.log("Pushed to data layer!")}})();
