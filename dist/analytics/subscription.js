"use strict";(()=>{var l=()=>{let e=new Error("Delay aborted");return e.name="AbortError",e},b=new WeakMap;function h({clearTimeout:e,setTimeout:n}={}){return(r,{value:o,signal:t}={})=>{if(t?.aborted)return Promise.reject(l());let a,s,c,d=e??clearTimeout,u=()=>{d(a),c(l())},w=()=>{t&&t.removeEventListener("abort",u)},m=new Promise((p,y)=>{s=()=>{w(),p(o)},c=y,a=(n??setTimeout)(s,r)});return t&&t.addEventListener("abort",u,{once:!0}),b.set(m,()=>{d(a),a=null,s()}),m}}var I=h(),f=I;window.dataLayer=window.dataLayer||[];window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{window.addEventListener("load",L)});async function L(){await f(1e3);let{priceId:e,isFromCheckout:n}=P();if(!e||!n){i();return}let r=g();if(!r)return i();let o=r.planConnections.find(t=>t.active&&t.payment?.priceId===e&&t.payment.status==="PAID"&&!t.payment.cancelAtDate);if(!o)return i();C(r,o.planId)}function i(){window.location.href="/"}function P(){let e=new URL(window.location.href),n=e.searchParams.get("fromCheckout");return{priceId:e.searchParams.get("msPriceId"),isFromCheckout:n}}function g(){let e=localStorage.getItem("_ms-mem");return e?JSON.parse(e):void 0}function C(e,n){let r={event:"myo-new-subscription",newInstructionsSubscription:{memberEmail:e.auth.email,memberId:e.id,memberFirstName:e.customFields["first-name"],memberLastName:e.customFields["last-name"],memberLocation:e.customFields?.location,stripeCustomerId:e.stripeCustomerId,planId:n}};return window.dataLayer.push(r),r}})();
