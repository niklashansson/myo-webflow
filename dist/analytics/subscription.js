"use strict";(()=>{var l=()=>{let e=new Error("Delay aborted");return e.name="AbortError",e},b=new WeakMap;function I({clearTimeout:e,setTimeout:n}={}){return(t,{value:o,signal:r}={})=>{if(r?.aborted)return Promise.reject(l());let a,s,c,d=e??clearTimeout,u=()=>{d(a),c(l())},p=()=>{r&&r.removeEventListener("abort",u)},m=new Promise((y,w)=>{s=()=>{p(),y(o)},c=w,a=(n??setTimeout)(s,t)});return r&&r.addEventListener("abort",u,{once:!0}),b.set(m,()=>{d(a),a=null,s()}),m}}var h=I(),f=h;window.dataLayer=window.dataLayer||[];window.addEventListener("load",L);async function L(){await f(1e3);let{priceId:e,isFromCheckout:n}=P();if(!e||!n){i();return}let t=g();if(!t)return i();let o=t.planConnections.find(r=>r.active&&r.payment?.priceId===e&&r.payment.status==="PAID"&&!r.payment.cancelAtDate);if(!o)return i();C(t,o.planId)}function i(){window.location.href="/"}function P(){let e=new URL(window.location.href),n=e.searchParams.get("fromCheckout");return{priceId:e.searchParams.get("msPriceId"),isFromCheckout:n}}function g(){let e=localStorage.getItem("_ms-mem");return e?JSON.parse(e):void 0}function C(e,n){let t={event:"myo-new-subscription",newInstructionsSubscription:{memberEmail:e.auth.email,memberId:e.id,memberFirstName:e.customFields["first-name"],memberLastName:e.customFields["last-name"],memberLocation:e.customFields?.location,stripeCustomerId:e.stripeCustomerId,planId:n}};return console.log(t),window.dataLayer.push(t),t}})();
