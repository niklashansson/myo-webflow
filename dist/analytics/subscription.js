"use strict";(()=>{var l=()=>{let e=new Error("Delay aborted");return e.name="AbortError",e},I=new WeakMap;function b({clearTimeout:e,setTimeout:n}={}){return(r,{value:o,signal:t}={})=>{if(t?.aborted)return Promise.reject(l());let a,s,i,u=e??clearTimeout,d=()=>{u(a),i(l())},p=()=>{t&&t.removeEventListener("abort",d)},m=new Promise((y,w)=>{s=()=>{p(),y(o)},i=w,a=(n??setTimeout)(s,r)});return t&&t.addEventListener("abort",d,{once:!0}),I.set(m,()=>{u(a),a=null,s()}),m}}var h=b(),f=h;window.addEventListener("load",P);async function P(){await f(1e3);let{priceId:e,isFromCheckout:n}=g();if(!e||!n){c();return}let r=C();if(!r)return c();let o=r.planConnections.find(t=>t.active&&t.payment?.priceId===e&&t.payment.status==="PAID"&&!t.payment.cancelAtDate);if(!o)return c();L(r,o.planId)}function c(){window.location.href="/"}function g(){let e=new URL(window.location.href),n=e.searchParams.get("fromCheckout");return{priceId:e.searchParams.get("msPriceId"),isFromCheckout:n}}function C(){let e=localStorage.getItem("_ms-mem");return e?JSON.parse(e):void 0}function L(e,n){let r={event:"myo-new-subscription",newInstructionsSubscription:{memberEmail:e.auth.email,memberId:e.id,memberFirstName:e.customFields["first-name"],memberLastName:e.customFields["last-name"],memberLocation:e.customFields?.location,stripeCustomerId:e.stripeCustomerId,planId:n},data:e};return window.dataLayer.push(r),r}})();
