"use strict";(()=>{var l=()=>{let e=new Error("Delay aborted");return e.name="AbortError",e},b=new WeakMap;function I({clearTimeout:e,setTimeout:n}={}){return(t,{value:o,signal:r}={})=>{if(r?.aborted)return Promise.reject(l());let a,s,i,u=e??clearTimeout,m=()=>{u(a),i(l())},p=()=>{r&&r.removeEventListener("abort",m)},d=new Promise((y,w)=>{s=()=>{p(),y(o)},i=w,a=(n??setTimeout)(s,t)});return r&&r.addEventListener("abort",m,{once:!0}),b.set(d,()=>{u(a),a=null,s()}),d}}var h=I(),f=h;window.addEventListener("load",P);async function P(){await f(1e3);let{priceId:e,isFromCheckout:n}=g();if(!e||!n){c();return}let t=C();if(!t)return c();let o=t.planConnections.find(r=>r.active&&r.payment?.priceId===e&&r.payment.status==="PAID"&&!r.payment.cancelAtDate);if(!o)return c();L(t,o.planId)}function c(){window.location.href="/"}function g(){let e=new URL(window.location.href),n=e.searchParams.get("fromCheckout");return{priceId:e.searchParams.get("msPriceId"),isFromCheckout:n}}function C(){let e=localStorage.getItem("_ms-mem");return e?JSON.parse(e):void 0}function L(e,n){let t={event:"myo-new-subscription",newInstructionsSubscription:{memberEmail:e.auth.email,memberId:e.id,memberFirstName:e.customFields["first-name"],memberLastName:e.customFields["last-name"],memberLocation:e.customFields?.location,stripeCustomerId:e.stripeCustomerId,planId:n}};return console.log(t),window.dataLayer.push(t),t}})();
